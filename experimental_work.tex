\chapter{Experimental work}
\label{ch:experimental_work}

\section{Implementation of a runtime support system for state machines in Lua}
\label{sec:impl_runtime_support}

\section{Implementation of simple state machines in Lua}
\label{sec:impl_state_machines}

\section{Running the state machine based application on a microcontroller}
\label{sec:running_on_micro}

\subsection{The LM3S9D92 microcontroller}

\subsection{Running eLua on the evaluation kit board}

\subsection{Running the simple application}

\section{Measurements of RTS overhead}
\label{sec:overhead_measure}

\begin{listing}[H]
\begin{luacode}
local task_size = 10
local task_repeats = 1
local measurements = 5

local function busy_work()
	for i=1,task_size do
		q = i*i
	end
end

for i=1,measurements do
	local start_time = tmr.read(tmr.SYS_TIMER)

	for j=1,task_repeats do
		busy_work()
	end

	local delta = tmr.read(tmr.SYS_TIMER) - start_time
	print("Delta: "..tostring(delta))
end
\end{luacode}
	\caption{Lua code used for overhead testing}
	\label{code:overhead}
\end{listing}

\section{Measurements of application performance}
\label{sec:performance_measure}

\section{A more complex application}
\label{sec:impl_complex_app}
